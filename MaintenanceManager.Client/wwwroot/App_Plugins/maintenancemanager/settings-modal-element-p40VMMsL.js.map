{"version":3,"file":"settings-modal-element-p40VMMsL.js","sources":["../../../assets/src/settings/settings-modal-element.ts"],"sourcesContent":["import { css, customElement, html, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbModalBaseElement } from \"@umbraco-cms/backoffice/modal\";\r\nimport { SettingsModalData, SettingsModalValue } from \"./settings-modal-token\";\r\nimport MaintenanceContext, { MAINTENANCE_CONTEXT_TOKEN } from \"../contexts/context\";\r\nimport { MaintenanceModeSettings } from \"../api\";\r\n\r\n@customElement('settings-modal')\r\nexport class SettingsModalElement extends \r\n    UmbModalBaseElement<SettingsModalData, SettingsModalValue> \r\n{\r\n    _context?: MaintenanceContext;\r\n\r\n    @state()\r\n    settings? : MaintenanceModeSettings;\r\n\r\n    constructor() {\r\n        super();\r\n        this.consumeContext(MAINTENANCE_CONTEXT_TOKEN, (_context) => {\r\n            this._context=_context;\r\n            _context.getSettings();\r\n            this.observe(_context.settings,(_settings) => {\r\n                this.settings = _settings;\r\n            })\r\n        });\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        super.connectedCallback();\r\n    }\r\n\r\n    @state()\r\n    content: string = '';\r\n\r\n    #handleConfirm() {\r\n\t\tthis.modalContext?.submit();\r\n        this._context?.saveSettings();\r\n\t}\r\n\r\n\t#handleCancel() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n    #updateSettings(property: string, e: Event) {\r\n        const value = (e.target as HTMLInputElement).value;\r\n\r\n        const update : { [key: string]: any }= {};\r\n        update[property] = value;\r\n\r\n        this._context?.updateSettings(update);\r\n    }\r\n\r\n//  \"allowBackOfficeUsersThrough\": true,\r\n//  \"templateName\": \"MaintenancePage\",\r\n//  \"unfrozenUsers\": \"\",\r\n//  \"viewModel\": {\r\n//  \"pageTitle\": \"Site Maintenance\",\r\n//  \"title\": \"Under Maintenance\",\r\n//  \"text\": \"The Website is currently undergoing maintenance and will be back shortly.\"\r\n\r\n\r\n    render() {\r\n        return html`\r\n            <umb-body-layout headline=\"Maintenance Mode Settings\">\r\n                <uui-box>\r\n                    <pre>${JSON.stringify(this.settings, null, 1)}</pre>\r\n                    <umb-property-layout \r\n                    alias=\"templateName\" \r\n                    label=\"Template\" \r\n                    description=\"Template to be used on maintenance page.\"\r\n                    orientation=\"vertical\">\r\n                        <div slot=\"editor\">\r\n                            <uui-input \r\n                            label=\"Template\" \r\n                            .value=${this.settings?.templateName}\r\n                            @input=${(e : Event) => this.#updateSettings('templateName', e)}></uui-input>\r\n                        </div>\r\n                    </umb-property-layout>\r\n                    <umb-property-layout \r\n                    alias=\"unfrozenUsers\" \r\n                    label=\"Unfrozren Users\" \r\n                    description=\"Users who can still edit when content is frozen.\"\r\n                    orientation=\"vertical\">\r\n                        <div slot=\"editor\">\r\n                            <uui-input \r\n                            label=\"Unfrozen users\" \r\n                            .value=${this.settings?.unfrozenUsers}\r\n                            @input=${(e : Event) => this.#updateSettings('unfrozenUsers', e)}\r\n                            placeholder=\"Enter Usernames Here...\"></uui-input>\r\n                        </div>\r\n                    </umb-property-layout>\r\n                    <umb-property-layout \r\n                    alias=\"PageTitle\" \r\n                    label=\"Page Title\" \r\n                    description=\"The title of the maintenance page in your browser.\"\r\n                    orientation=\"vertical\">\r\n                        <div slot=\"editor\">\r\n                            <uui-input \r\n                            label=\"Page Title\" \r\n                            .value=${this.settings?.pageTitle}\r\n                            @input=${(e : Event) => this.#updateSettings('pageTitle', e)}></uui-input>\r\n                        </div>\r\n                    </umb-property-layout>\r\n                    <umb-property-layout \r\n                    alias=\"title\" \r\n                    label=\"Title\" \r\n                    description=\"The title on the maintenance page.\"\r\n                    orientation=\"vertical\">\r\n                        <div slot=\"editor\">\r\n                            <uui-input \r\n                            label=\"Title\" \r\n                            .value=${this.settings?.title}\r\n                            @input=${(e : Event) => this.#updateSettings('title', e)}></uui-input>\r\n                        </div>\r\n                    </umb-property-layout>\r\n                    <umb-property-layout \r\n                    alias=\"text\" \r\n                    label=\"Text\" \r\n                    description=\"The text on the maintenance page.\"\r\n                    orientation=\"vertical\">\r\n                        <div slot=\"editor\">\r\n                            <uui-textarea \r\n                            label=\"Text\" \r\n                            rows=5\r\n                            .value=${this.settings?.text}\r\n                            @input=${(e : Event) => this.#updateSettings('text', e)}></uui-textarea>\r\n                        </div>\r\n                    </umb-property-layout>\r\n                </uui-box>\r\n                <div slot=\"actions\">\r\n                        <uui-button id=\"cancel\" label=\"Cancel\" @click=\"${this.#handleCancel}\">Cancel</uui-button>\r\n                        <uui-button\r\n                            id=\"submit\"\r\n                            color='positive'\r\n                            look=\"primary\"\r\n                            label=\"Submit\"\r\n                            @click=${this.#handleConfirm}></uui-button>\r\n            </div>\r\n            </umb-body-layout>\r\n        `;\r\n    }\r\n\r\n    static styles = css`\r\n        uui-input {\r\n            width: 100%;\r\n        }\r\n    `\r\n    \r\n}\r\n\r\nexport default SettingsModalElement;"],"names":["_handleConfirm","handleConfirm_fn","_handleCancel","handleCancel_fn","_updateSettings","updateSettings_fn","SettingsModalElement","UmbModalBaseElement","__privateAdd","MAINTENANCE_CONTEXT_TOKEN","_context","_settings","html","_a","e","__privateMethod","_b","_c","_d","_e","property","value","update","css","__decorateClass","state","customElement","SettingsModalElement$1"],"mappings":"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"}